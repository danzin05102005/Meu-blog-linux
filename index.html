<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Linux Lab - Tech & Games</title>
    <meta name="theme-color" content="#050505">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- ESTILO CYBERPUNK / NEON --- */
        :root { --background-body: #050505; --neon-green: #00ff41; --neon-blue: #00f3ff; --card-bg: #111; --font-main: 'Fira Code', monospace; }
        
        body { background-color: var(--background-body); font-family: var(--font-main); color: #ddd; }

        /* BANNER */
        .cyber-banner {
            background: linear-gradient(180deg, #000 0%, #111 100%);
            padding: 30px 20px; text-align: center;
            border-bottom: 2px solid var(--neon-green);
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.1); margin-bottom: 30px;
        }

        /* CARDS DOS POSTS */
        article {
            background-color: var(--card-bg);
            border: 1px solid #333;
            border-left: 3px solid var(--neon-green); /* Detalhe verde na esquerda */
            border-radius: 8px; margin-bottom: 25px;
            animation: entrar 0.5s ease-out;
        }

        h2, h3 { color: var(--neon-green); margin-bottom: 10px; }
        .data-post { font-size: 0.75em; color: #666; margin-bottom: 15px; display: block; }
        
        /* Ajustes para tabelas e códigos dentro dos posts */
        table { border: 1px solid #333; margin: 15px 0; }
        pre { background: #080808; border: 1px solid var(--neon-blue); }

        @keyframes entrar { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="cyber-banner">
        <h1 style="color: #fff; margin:0">LINUX LAB_</h1>
        <p style="color: var(--neon-blue); margin:0;">> Otimização Extrema (Dev: Danilo)</p>
    </div>

    <main class="container" id="lista-posts">
        <div style="text-align: center; margin-top: 50px;">
            <p style="color: var(--neon-green)">CONECTANDO AO SERVIDOR...</p>
            <progress></progress>
        </div>
    </main>

    <footer style="text-align: center; opacity: 0.5; font-size: 0.8em; padding: 40px;">
        SYSTEM STATUS: ONLINE • HOST: GITHUB & FIREBASE
    </footer>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script>
        // SUAS CHAVES DO FIREBASE
        const firebaseConfig = {
            apiKey: "AIzaSyDnkmZ7BMasKQQGnAQSTi3jxiuCbxyLU7M",
            authDomain: "meubloglinux.firebaseapp.com",
            projectId: "meubloglinux",
            storageBucket: "meubloglinux.firebasestorage.app",
            messagingSenderId: "262696388382",
            appId: "1:262696388382:web:d2784dc5dbba922cc8eb0f"
        };

        // INICIALIZA O SISTEMA
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const lista = document.getElementById('lista-posts');

        // BUSCA OS POSTS AUTOMATICAMENTE
        db.collection("posts").orderBy("data", "desc").onSnapshot((querySnapshot) => {
            lista.innerHTML = ""; // Limpa o carregamento
            
            if (querySnapshot.empty) {
                lista.innerHTML = "<p style='text-align:center'>Nenhum artigo encontrado no banco de dados.</p>";
                return;
            }

            querySnapshot.forEach((doc) => {
                const post = doc.data();
                
                // Formata a data (converte de timestamp para dia/mês)
                const dataFormatada = new Date(post.data).toLocaleDateString('pt-BR');

                // Cria o HTML do post
                lista.innerHTML += `
                    <article>
                        <header>
                            <span class="data-post">DATA: ${dataFormatada} • ID: ${doc.id}</span>
                            <h3>${post.titulo}</h3>
                        </header>
                        <div class="conteudo-post">
                            ${post.conteudo} 
                        </div>
                    </article>
                `;
            });
        }, (error) => {
            console.error(error);
            lista.innerHTML = `<article style="border-color: red"><h3 style="color:red">ERRO DE CONEXÃO</h3><p>Verifique se o Firestore foi criado no modo TESTE.<br>Erro: ${error.message}</p></article>`;
        });
    </script>
</body>
</html>