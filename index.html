<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux Lab | Cyberpunk</title>
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>

    <style>
        /* --- CORE STYLES --- */
        :root { --bg: #050505; --panel: rgba(17, 17, 17, 0.95); --text: #eee; --neon-green: #00ff41; --neon-purple: #9d00ff; --border: #333; --matrix-trail: rgba(0, 0, 0, 0.05); }
        body.light-mode { --bg: #e0e0e0; --panel: rgba(255, 255, 255, 0.95); --text: #111; --neon-green: #008f11; --neon-purple: #6200a3; --border: #ccc; --matrix-trail: rgba(255, 255, 255, 0.05); }
        body { background-color: var(--bg); color: var(--text); font-family: 'Courier New', monospace; margin: 0; padding-bottom: 80px; overflow-x: hidden; transition: 0.3s; cursor: crosshair; }
        
        button, a, .card, input, textarea { cursor: alias; }
        canvas#matrix { position: fixed; top: 0; left: 0; z-index: -1; width: 100%; height: 100%; }

        /* HEADER */
        header { text-align: center; padding: 20px; border-bottom: 2px solid var(--neon-green); background: var(--panel); backdrop-filter: blur(5px); position: relative; z-index: 10; }
        h1 { margin: 0; color: var(--neon-green); text-transform: uppercase; letter-spacing: 2px; display: inline-block; }
        h1:hover { animation: glitch 0.3s cubic-bezier(.25, .46, .45, .94) both infinite; color: var(--neon-purple); }
        @keyframes glitch { 0% { transform: translate(0) } 20% { transform: translate(-2px, 2px) } 40% { transform: translate(-2px, -2px) } 60% { transform: translate(2px, 2px) } 80% { transform: translate(2px, -2px) } 100% { transform: translate(0) } }

        #relogio { font-size: 2.5rem; font-weight: bold; text-shadow: 0 0 10px var(--neon-green); margin: 10px 0; }
        #btn-terminal { background: transparent; border: none; color: var(--neon-green); font-size: 1.5rem; cursor: pointer; position: absolute; top: 20px; right: 20px; font-weight: bold; animation: piscar 2s infinite; }
        
        .nav-bar { margin-top: 15px; display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; }
        .nav-btn { background: transparent; border: 1px solid var(--neon-green); color: var(--neon-green); padding: 8px 16px; cursor: pointer; font-weight: bold; text-transform: uppercase; transition: 0.3s; text-decoration: none; }
        .nav-btn:hover { background: var(--neon-green); color: var(--bg); box-shadow: 0 0 15px var(--neon-green); }

        .search-box { margin: 20px auto; max-width: 90%; text-align: center; }
        #busca-input { width: 100%; max-width: 400px; padding: 10px; background: var(--bg); border: 1px solid var(--neon-purple); color: var(--neon-green); outline: none; border-radius: 5px; }

        /* POSTS GRID */
        .container { padding: 20px; max-width: 800px; margin: 0 auto; min-height: 60vh; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .card { background: var(--panel); border: 1px solid var(--border); border-radius: 8px; overflow: hidden; transition: 0.3s; position: relative; display: flex; flex-direction: column; }
        .card:hover { border-color: var(--neon-green); transform: translateY(-5px); box-shadow: 0 0 15px rgba(0, 255, 65, 0.2); }
        .card-img { width: 100%; height: 160px; object-fit: cover; border-bottom: 1px solid var(--border); display: block; background: #222; }
        .card-body { padding: 15px; }
        .card h2 { color: var(--text); font-size: 1.2rem; margin: 5px 0; }
        .card span { font-size: 0.8rem; color: var(--neon-purple); display: block; margin-bottom: 5px; }
        .btn-like { background: none; border: 1px solid var(--border); color: #888; cursor: pointer; padding: 5px 12px; border-radius: 20px; transition: 0.2s; }
        .btn-like:hover, .btn-like.curtido { border-color: #ff4040; color: #ff4040; }

        /* OVERLAYS */
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); overflow-y: auto; z-index: 200; padding: 20px; box-sizing: border-box; }
        .btn-voltar { background: transparent; border: 1px solid var(--neon-green); color: var(--neon-green); padding: 10px 20px; font-weight: bold; cursor: pointer; margin-bottom: 20px; }
        .overlay-content { max-width: 800px; margin: 0 auto; }
        .overlay-content img { max-width: 100%; border-radius: 5px; border: 1px solid var(--neon-purple); }
        .overlay-content p { line-height: 1.6; margin-bottom: 15px; }
        
        /* Highlight Fix */
        pre[class*="language-"] { border: 1px solid var(--neon-green) !important; border-radius: 8px !important; background: #111 !important; margin-bottom: 20px !important; }

        /* R√ÅDIO CYBERPUNK */
        #cyber-radio { position: fixed; bottom: 20px; left: 20px; background: rgba(0,0,0,0.9); border: 1px solid var(--neon-purple); padding: 15px; width: 180px; z-index: 9000; box-shadow: 0 0 15px rgba(157, 0, 255, 0.2); transition: 0.3s; }
        #cyber-radio:hover { border-color: var(--neon-green); transform: scale(1.02); }
        .radio-status { font-size: 0.7rem; color: var(--neon-green); margin-bottom: 5px; display: flex; align-items: center; gap: 5px; }
        .live-dot { width: 8px; height: 8px; background: red; border-radius: 50%; animation: piscar 1s infinite; display: inline-block; }
        .radio-wave { display: flex; align-items: flex-end; height: 20px; gap: 2px; margin-bottom: 10px; border-bottom: 1px dashed #555; padding-bottom: 5px; }
        .bar { width: 10%; background: var(--neon-purple); animation: equalizador 0.5s infinite alternate; }
        .bar:nth-child(even) { animation-duration: 0.3s; background: var(--neon-green); }
        @keyframes equalizador { 0% { height: 20%; } 100% { height: 100%; } }
        @keyframes piscar { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
        #btn-radio-play { width: 100%; background: transparent; border: 1px solid var(--text); color: var(--text); padding: 5px; cursor: pointer; font-weight: bold; margin-bottom: 5px; }
        #btn-radio-play:hover { background: var(--text); color: black; }
        #vol-radio { width: 100%; accent-color: var(--neon-purple); cursor: pointer; height: 5px; }

        /* COMENT√ÅRIOS */
        #comentarios-section { margin-top: 40px; border-top: 1px dashed var(--neon-green); padding-top: 20px; }
        .comment-box { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 5px; margin-bottom: 10px; border-left: 3px solid var(--neon-purple); }
        .comment-user { color: var(--neon-green); font-weight: bold; font-size: 0.9rem; margin-bottom: 5px; display: block; }
        .comment-date { float: right; color: #666; font-size: 0.7rem; }
        .comment-form textarea { width: 100%; background: #111; border: 1px solid #333; color: #fff; padding: 10px; font-family: monospace; resize: vertical; }
        .btn-comment { background: var(--neon-purple); color: #fff; border: none; padding: 10px 20px; margin-top: 10px; cursor: pointer; font-weight: bold; }

        /* EXTRAS */
        #secret-terminal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 35vh; background: rgba(0,0,0,0.95); border-bottom: 2px solid var(--neon-green); z-index: 9999; padding: 20px; box-sizing: border-box; overflow-y: auto; text-align: left; }
        .btn-pix { position: fixed; bottom: 20px; right: 20px; background: var(--neon-purple); color: #fff; padding: 15px 25px; border-radius: 50px; font-weight: bold; box-shadow: 0 0 20px rgba(157, 0, 255, 0.5); border: none; z-index: 50; animation: pulsando 2s infinite; }
        @keyframes pulsando { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        
        #contato-form input, #contato-form textarea { width: 100%; background: #050505; border: 1px solid var(--neon-green); color: var(--neon-green); padding: 10px; margin-bottom: 10px; font-family: monospace; }
        footer { text-align: center; padding: 40px; border-top: 1px solid var(--neon-green); background: var(--panel); margin-top: 50px; }
    </style>
</head>
<body>

    <canvas id="matrix"></canvas>

    <div id="cyber-radio">
        <div class="radio-status"><span class="live-dot"></span> SYNTHWAVE FM</div>
        <div class="radio-wave">
            <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
            <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        </div>
        <button id="btn-radio-play" onclick="window.toggleRadio()">[ ‚ñ∂ PLAY ]</button>
        <input type="range" id="vol-radio" min="0" max="1" step="0.1" value="0.3" onchange="window.mudarVolume(this.value)">
    </div>

    <div id="secret-terminal">
        <div id="terminal-output" style="color:#ccc; margin-bottom:10px;">Linux Lab Shell v3.0<br>Digite 'help' para ver os comandos.<br></div>
        <div style="display:flex;">
            <span style="color:var(--neon-green); margin-right:10px;">root@linuxlab:~$</span>
            <input type="text" id="terminal-input" style="background:transparent; border:none; color:#fff; width:100%; outline:none; font-family:'Courier New', monospace;" autocomplete="off">
        </div>
    </div>

    <div id="home-view">
        <header>
            <button id="btn-terminal" onclick="window.toggleTerminal(); window.playClick()">>_</button>
            <h1>Linux_Lab_</h1>
            <div id="relogio">00:00:00</div>
            <div id="terminal-typing" style="color:var(--neon-purple); font-size:0.9rem; margin: 10px 0; min-height: 20px;">> _</div>

            <div class="nav-bar">
                <button class="nav-btn" id="btn-sound" onclick="window.alternarSom()">[ üîá SOM ]</button>
                <button class="nav-btn" onclick="window.alternarTema()">[ üåó TEMA ]</button>
                <button class="nav-btn" onclick="window.abrirTutorial()">[ ‚ùì AJUDA ]</button>
                <button class="nav-btn" onclick="window.abrirSobre()">[ üíæ SOBRE ]</button>
                <button class="nav-btn" onclick="window.abrirContato()">[ ‚úâÔ∏è CONTATO ]</button>
            </div>

            <div class="search-box"><input type="text" id="busca-input" placeholder="Buscar no sistema..." onkeyup="window.filtrarPosts()"></div>
        </header>

        <div class="container">
            <div id="loading" style="text-align:center; color:var(--neon-purple); margin-top:20px;">Carregando sistema...</div>
            <div class="grid" id="grid-posts"></div>
        </div>

        <footer>
            <p style="font-weight: bold;">LINUX_LAB_ // SYSTEM.ROOT</p>
            <div class="social-links"><a href="https://x.com/DaniloGardiano" target="_blank" style="color:var(--neon-purple); text-decoration:none; font-weight:bold;">TWITTER</a></div>
            <p class="copyright">Developed by <strong>Danilo</strong> ¬© 2026</p>
        </footer>
    </div>

    <button class="btn-pix" onclick="window.fazerPix()">üí∏ Apoiar</button>

    <div id="leitura-overlay" class="overlay">
        <button class="btn-voltar" onclick="history.back()">< VOLTAR</button>
        <div class="overlay-content">
            <div id="conteudo-post"></div>
            <div id="comentarios-section">
                <h3>// COMMS_LOG (Coment√°rios)</h3>
                <div class="comment-form">
                    <input type="text" id="coment-nome" placeholder="Codename (Seu Nome)" style="width:100%; background:#111; border:1px solid #333; color:var(--neon-green); padding:10px; margin-bottom:5px;">
                    <textarea id="coment-texto" rows="3" placeholder="Digite sua mensagem aqui..."></textarea>
                    <button class="btn-comment" onclick="window.enviarComentario()">[ ENVIAR DADOS ]</button>
                </div>
                <div id="lista-comentarios" style="margin-top: 20px;"></div>
            </div>
        </div>
    </div>

    <div id="contato-overlay" class="overlay">
        <button class="btn-voltar" onclick="history.back()">< FECHAR</button>
        <div class="overlay-content" style="max-width: 600px;">
            <h2 style="color:var(--neon-purple)">// SECURE_INBOX</h2>
            <div id="contato-form">
                <label>IDENTIDADE (Nome):</label> <input type="text" id="ct-nome">
                <label>CONTATO (Email/Twitter):</label> <input type="text" id="ct-contato">
                <label>PAYLOAD (Mensagem):</label> <textarea id="ct-msg" rows="5"></textarea>
                <button class="btn-comment" onclick="window.enviarContato()" style="width:100%;">[ EXECUTAR ENVIO ]</button>
            </div>
        </div>
    </div>

    <div id="sobre-overlay" class="overlay">
        <button class="btn-voltar" onclick="history.back()">< VOLTAR</button>
        <div class="overlay-content">
            <h2>// SOBRE O PROJETO</h2>
            <p>O <strong>Linux Lab</strong> √© um experimento digital.</p>
            <p>Criado e mantido por <strong>Danilo Gardiano</strong>.</p>
        </div>
    </div>

    <div id="tutorial-overlay" class="overlay">
        <button class="btn-voltar" onclick="window.iniciarSessao()">< FECHAR</button>
        <div class="overlay-content">
            <h2 style="color:var(--neon-purple)">// MANUAL DE OPERA√á√ÉO v2.0</h2>
            <p>Utilize o <strong>Terminal (>_)</strong> para interagir.</p>
            <div style="border:1px solid var(--neon-green); padding:15px; margin-bottom:20px;">
                <strong>COMANDOS:</strong><br>
                <code>matrix red</code> - Alerta Vermelho<br>
                <code>matrix blue</code> - Resfriamento Azul<br>
                <code>date</code> - Ver Hora<br>
                <code>exit</code> - Fechar Terminal<br>
                <code>reboot</code> - Reiniciar
            </div>
            <button class="btn-comment" onclick="window.iniciarSessao()" style="width:100%; background:var(--neon-green); color:black;">[ INICIAR ]</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, query, onSnapshot, doc, updateDoc, increment, addDoc, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = { apiKey: "AIzaSyDnkmZ7BMasKQQGnAQSTi3jxiuCbxyLU7M", authDomain: "meubloglinux.firebaseapp.com", projectId: "meubloglinux", storageBucket: "meubloglinux.firebasestorage.app", messagingSenderId: "262696388382", appId: "1:262696388382:web:d2784dc5dbba922cc8eb0f" };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        let listaArtigos = [];
        let currentPostId = null;

        // --- FUN√á√ïES GLOBAIS ---
        
        // R√°dio
        const audioStream = new Audio('https://stream.nightride.fm/nightride.m4a');
        let radioTocando = false;
        window.toggleRadio = function() {
            const btn = document.getElementById('btn-radio-play');
            const bars = document.querySelectorAll('.bar');
            if (!radioTocando) {
                audioStream.volume = document.getElementById('vol-radio').value;
                audioStream.play().catch(e => alert("Interaja com a p√°gina primeiro!"));
                btn.innerText = "[ ‚è∏ PAUSE ]"; btn.style.color = "var(--neon-green)";
                bars.forEach(b => b.style.animationPlayState = 'running');
                radioTocando = true;
            } else {
                audioStream.pause();
                btn.innerText = "[ ‚ñ∂ PLAY ]"; btn.style.color = "var(--text)";
                bars.forEach(b => b.style.animationPlayState = 'paused');
                radioTocando = false;
            }
            window.playClick();
        };
        window.mudarVolume = (val) => audioStream.volume = val;

        // Som e Efeitos
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        const audioCtx = new AudioContext();
        let somAtivado = false; 
        function destravaAudio() { if (audioCtx.state === 'suspended') { audioCtx.resume(); } ['click', 'keydown'].forEach(evt => document.removeEventListener(evt, destravaAudio)); }
        ['click', 'keydown'].forEach(evt => document.addEventListener(evt, destravaAudio));
        function beep(duration, frequency, volume, type) { if (!somAtivado) return; const osc = audioCtx.createOscillator(); const gain = audioCtx.createGain(); osc.connect(gain); gain.connect(audioCtx.destination); gain.gain.value = volume; osc.frequency.value = frequency; osc.type = type; osc.start(); osc.stop(audioCtx.currentTime + (duration / 1000)); }
        
        window.playClick = () => beep(100, 400, 0.1, "square");
        window.playHover = () => beep(50, 800, 0.05, "sine");
        
        window.alternarSom = function() { somAtivado = !somAtivado; document.getElementById('btn-sound').innerText = somAtivado ? "[ üîä SOM ]" : "[ üîá SOM ]"; localStorage.setItem('somLinuxLab', somAtivado ? 'on' : 'off'); };
        if (localStorage.getItem('somLinuxLab') === 'on') { somAtivado = true; document.getElementById('btn-sound').innerText = "[ üîä SOM ]"; }

        // Navega√ß√£o
        window.abrirSobre = () => abrirOverlay('sobre-overlay', '#sobre');
        window.abrirTutorial = () => abrirOverlay('tutorial-overlay', '#ajuda');
        window.abrirContato = () => abrirOverlay('contato-overlay', '#contato');
        window.iniciarSessao = () => { localStorage.setItem('vistoTutorial', 'sim'); history.back(); };
        function abrirOverlay(id, hash) { document.querySelectorAll('.overlay').forEach(el => el.style.display = 'none'); document.getElementById('home-view').style.display = 'none'; document.getElementById(id).style.display = 'block'; window.scrollTo(0,0); history.pushState({page: id}, null, hash); window.playClick(); }
        window.addEventListener('popstate', () => { document.querySelectorAll('.overlay').forEach(el => el.style.display = 'none'); document.getElementById('home-view').style.display = 'block'; });

        // Pix
        window.fazerPix = function() {
            window.playClick();
            navigator.clipboard.writeText("pixlinuxblog@gmail.com").then(() => { confetti({particleCount:150}); alert("‚úÖ PIX copiado!"); }).catch(() => prompt("Copie:", "pixlinuxblog@gmail.com"));
        };

        // Terminal
        window.toggleTerminal = () => { const t = document.getElementById('secret-terminal'); t.style.display = (t.style.display==='none')?'block':'none'; if(t.style.display==='block') document.getElementById('terminal-input').focus(); };
        document.addEventListener('keydown', (e) => { if(e.key==="'"||e.key==="`"){ e.preventDefault(); window.toggleTerminal(); } });
        
        const terminalInput = document.getElementById('terminal-input');
        terminalInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                window.playClick();
                const cmd = this.value.toLowerCase().trim();
                this.value = ''; 
                document.getElementById('terminal-output').innerHTML += `<div style="color:var(--neon-green)">root@linuxlab:~$ ${cmd}</div>`;
                
                if(cmd === 'matrix red') document.documentElement.style.setProperty('--neon-green', '#ff0000');
                else if(cmd === 'matrix blue') document.documentElement.style.setProperty('--neon-green', '#00eaff');
                else if(cmd === 'matrix green') document.documentElement.style.setProperty('--neon-green', '#00ff41');
                else if(cmd === 'reboot') location.reload();
                else if(cmd === 'date') document.getElementById('terminal-output').innerHTML += `<div style="color:#aaa">${new Date().toString()}</div>`;
                else if(cmd === 'exit') window.toggleTerminal();
                else if(cmd === 'whoami') document.getElementById('terminal-output').innerHTML += `<div style="color:#aaa">guest_user@linuxlab</div>`;
                else if(cmd === 'clear') document.getElementById('terminal-output').innerHTML = '';
                else if(cmd === 'help') document.getElementById('terminal-output').innerHTML += `<div style="color:#aaa">Available: matrix [red/blue/green], date, reboot, clear, exit, whoami</div>`;
                else document.getElementById('terminal-output').innerHTML += `<div style="color:#ff0000">Command not found. Type 'help'.</div>`;
            }
        });

        // Posts e Intera√ß√£o
        window.filtrarPosts = function() {
            const termo = document.getElementById('busca-input').value.toLowerCase();
            renderizar(listaArtigos.filter(p => p.titulo.toLowerCase().includes(termo)));
        };

        window.curtirPost = async (event, id) => { 
            event.stopPropagation(); 
            await updateDoc(doc(db, "artigos", id), { likes: increment(1) }); 
            window.playClick(); 
            confetti({ particleCount: 50, spread: 60, origin: { x: event.clientX/window.innerWidth, y: event.clientY/window.innerHeight } }); 
        };

        window.abrirPost = function(id) {
            currentPostId = id;
            const post = listaArtigos.find(p => p.id === id);
            if (post) {
                let html = post.conteudo || '<p>...</p>';
                if (post.imagem) html = `<img src="${post.imagem}" style="width:100%; border-radius:10px; margin-bottom:20px;">` + html;
                if (!html.includes('<h2>')) html = `<h2>${post.titulo}</h2>` + html;
                document.getElementById('conteudo-post').innerHTML = html;
                setTimeout(() => Prism.highlightAll(), 100);
                
                const divComents = document.getElementById('lista-comentarios');
                divComents.innerHTML = '<p>Carregando logs...</p>';
                if(window.unsubscribeComentarios) window.unsubscribeComentarios();
                
                const q = query(collection(db, "artigos", id, "comentarios"), orderBy("data", "desc"));
                window.unsubscribeComentarios = onSnapshot(q, (snapshot) => {
                    divComents.innerHTML = '';
                    if(snapshot.empty) { divComents.innerHTML = '<p style="color:#666;">// Nenhum dado encontrado.</p>'; return; }
                    snapshot.forEach(doc => {
                        const c = doc.data();
                        const dataFormatada = new Date(c.data).toLocaleDateString();
                        divComents.innerHTML += `<div class="comment-box"><span class="comment-user">${c.nome} <span class="comment-date">[${dataFormatada}]</span></span>${c.texto}</div>`;
                    });
                });
                abrirOverlay('leitura-overlay', '#leitura');
            }
        };

        window.enviarComentario = async () => {
            const nome = document.getElementById('coment-nome').value || "An√¥nimo";
            const texto = document.getElementById('coment-texto').value;
            if(!texto) return alert("Erro: Mensagem vazia.");
            window.playClick();
            await addDoc(collection(db, "artigos", currentPostId, "comentarios"), { nome, texto, data: new Date().toISOString() });
            document.getElementById('coment-texto').value = '';
        };

        window.enviarContato = async () => {
            const nome = document.getElementById('ct-nome').value;
            const contato = document.getElementById('ct-contato').value;
            const msg = document.getElementById('ct-msg').value;
            if(!nome || !msg) return alert("Dados incompletos.");
            await addDoc(collection(db, "inbox_contato"), { nome, contato, mensagem: msg, data: new Date().toISOString() });
            alert("‚úÖ MENSAGEM ENVIADA.");
            history.back();
            document.getElementById('ct-msg').value = '';
        };
        
        window.alternarTema = function() {
            document.body.classList.toggle('light-mode');
            window.playClick();
        };

        function renderizar(lista) {
            const grid = document.getElementById('grid-posts'); grid.innerHTML = '';
            [...lista].reverse().forEach(post => {
                let img = (post.imagem && post.imagem.trim() !== "") ? `<img src="${post.imagem}" class="card-img" onerror="this.style.display='none'">` : "";
                grid.innerHTML += `<div class="card" onclick="window.abrirPost('${post.id}')">${img}<div class="card-body"><span>// ${post.categoria || 'Geral'}</span><h2>${post.titulo}</h2><div class="like-area"><button class="btn-like" onclick="window.curtirPost(event, '${post.id}')">‚ù§Ô∏è ${post.likes || 0}</button></div></div></div>`;
            });
        }

        // --- INICIALIZA√á√ÉO ---
        // Digita√ß√£o
        const mensagens = [ "Iniciando Kernel v5.1...", "Carregando m√≥dulos...", "Conectando ao Firebase...", "Bem-vindo ao Linux Lab." ];
        async function digitarTerminal() {
            const elemento = document.getElementById('terminal-typing');
            for (let i = 0; i < mensagens.length; i++) {
                const frase = mensagens[i];
                elemento.innerText = "> "; 
                for (let letra of frase) { elemento.innerText += letra; await new Promise(r => setTimeout(r, 50)); }
                await new Promise(r => setTimeout(r, 1000));
            }
            elemento.innerHTML = "> Sistema Online <span class='cursor-blink'>_</span>";
        }
        digitarTerminal();

        // Matrix
        const canvas = document.getElementById('matrix'), ctx = canvas.getContext('2d'); canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        const drops = Array(Math.floor(canvas.width/14)).fill(1);
        setInterval(() => { ctx.fillStyle='rgba(0,0,0,0.05)'; ctx.fillRect(0,0,canvas.width,canvas.height); ctx.fillStyle=getComputedStyle(document.documentElement).getPropertyValue('--neon-green'); ctx.font='14px monospace'; drops.forEach((y,i)=>{ ctx.fillText("01LINUX"[Math.floor(Math.random()*7)], i*14, y*14); if(y*14>canvas.height && Math.random()>0.975) drops[i]=0; drops[i]++; }); }, 50);

        setInterval(() => document.getElementById('relogio').innerText = new Date().toLocaleTimeString('pt-BR'), 1000);
        
        onSnapshot(query(collection(db, "artigos")), (snapshot) => { listaArtigos = []; snapshot.forEach((doc) => { let d = doc.data(); d.id = doc.id; listaArtigos.push(d); }); renderizar(listaArtigos); document.getElementById('loading').style.display = 'none'; });
    </script>
</body>
</html>