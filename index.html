<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Linux Folia - Tech & Games</title>
    <meta name="theme-color" content="#050505">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- ESTILO GERAL CYBERPUNK --- */
        :root { 
            --bg: #050505; 
            --neon-green: #00ff41; 
            --neon-blue: #00f3ff; 
            --card-bg: #111; 
            --font: 'Fira Code', monospace; 
        }
        body { background-color: var(--bg); font-family: var(--font); color: #ddd; padding-top: 80px; overflow-x: hidden; }

        /* ========================================= */
        /* üé≠ TEMA DE CARNAVAL (CSS) üé≠       */
        /* ========================================= */
        :root {
            --neon-green: #d600ff; /* Roxo Neon */
            --neon-blue: #ffd700;  /* Dourado */
        }
        .confete {
            position: fixed; top: -10px; z-index: 9999;
            width: 10px; height: 10px;
            animation: cair linear infinite;
        }
        @keyframes cair {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        /* FIM DO TEMA */

        /* REL√ìGIO FLUTUANTE (VERS√ÉO MINI) */
        #relogio-flutuante {
            position: fixed; bottom: 15px; right: 15px; /* Mais pro cantinho */
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid var(--neon-green);
            color: var(--neon-green);
            
            /* DIMINUI AQUI */
            padding: 4px 10px; 
            font-size: 0.7em; /* Letra menor */
            border-radius: 4px;
            
            font-family: 'Fira Code', monospace;
            z-index: 10000;
            box-shadow: 0 0 8px rgba(214, 0, 255, 0.15);
            user-select: none;
            display: flex; align-items: center; gap: 6px;
        }
        .status-dot {
            width: 6px; height: 6px; /* Bolinha menor */
            background-color: #00ff41; /* VERDE AGORA */
            border-radius: 50%;
            animation: piscar 2s infinite;
        }
        @keyframes piscar { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }

        /* HEADER FIXO */
        .cyber-nav {
            position: fixed; top: 0; left: 0; width: 100%; background: rgba(0,0,0,0.95);
            border-bottom: 2px solid var(--neon-green); padding: 15px 20px; z-index: 999;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 0 15px rgba(214, 0, 255, 0.3);
        }
        .cyber-nav a { color: #fff; text-decoration: none; margin-left: 20px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .cyber-nav a:hover { color: var(--neon-blue); text-shadow: 0 0 10px var(--neon-blue); }

        /* BUSCA */
        .busca-container { margin-bottom: 30px; position: relative; }
        #input-busca {
            background: #0a0a0a !important; border: 1px solid #333 !important; color: #fff !important;
            padding-left: 40px; border-radius: 30px; transition: 0.3s;
        }
        #input-busca:focus { border-color: var(--neon-blue) !important; box-shadow: 0 0 10px rgba(255, 215, 0, 0.2); }
        .icone-busca { position: absolute; left: 15px; top: 12px; color: #666; }

        /* CARDS (LISTA DE POSTS) */
        .card-post {
            background-color: var(--card-bg); border: 1px solid #333; border-left: 4px solid var(--neon-green);
            border-radius: 6px; margin-bottom: 25px; padding: 20px; transition: 0.2s;
        }
        .card-post:hover { border-color: var(--neon-blue); transform: translateX(5px); }

        /* INFO BAR (Likes e Views) */
        .info-bar { display: flex; gap: 15px; font-size: 0.85em; }
        .info-item { display: flex; align-items: center; gap: 5px; }

        /* BOT√ÉO DE CURTIR */
        .btn-like {
            background: #1a1a1a; border: 1px solid #444; color: #888; 
            padding: 8px 20px; border-radius: 30px; cursor: pointer; display: inline-flex; align-items: center; gap: 8px;
            font-weight: bold; transition: 0.3s;
        }
        .btn-like.curtido {
            border-color: #ff0041; color: #ff0041; background: rgba(255,0,65,0.1); box-shadow: 0 0 10px rgba(255,0,65,0.2);
        }
        .btn-like:hover { transform: scale(1.05); }

        /* TELAS E ANIMA√á√ÉO */
        .tela { display: none; padding-bottom: 50px; }
        .fade-in { animation: entrar 0.4s ease-out; }
        @keyframes entrar { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* ESTILO DO SOBRE */
        .caixa-sugestao { border: 1px dashed var(--neon-blue); padding: 25px; border-radius: 8px; margin-top: 30px; background: #0a0a0a; }
        textarea { background: #000 !important; border-color: #333 !important; color: #fff !important; }
        #relogio-bloqueio { display: none; color: var(--neon-blue); font-weight: bold; margin-top: 10px; text-align: center; border: 1px solid var(--neon-blue); padding: 10px; border-radius: 5px; background: rgba(255, 215, 0, 0.1); }

        /* ARTIGO */
        .artigo-container img { max-width: 100%; border-radius: 5px; border: 1px solid #333; }
        .artigo-container h2, .artigo-container h3 { color: var(--neon-green); margin-top: 25px; }
        .artigo-container pre { border: 1px solid var(--neon-blue); background: #080808; }
    </style>
</head>
<body>

    <div id="relogio-flutuante">
        <div class="status-dot"></div>
        <span id="hora-sistema">SYS_TIME: --:--</span>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Rel√≥gio
            setInterval(() => {
                const agora = new Date();
                const hora = agora.toLocaleTimeString('pt-BR');
                document.getElementById('hora-sistema').innerText = "SYS_TIME: " + hora;
            }, 1000);

            // Confetes
            const cores = ['#d600ff', '#ffd700', '#00ff41', '#00f3ff'];
            const quantidade = 15;
            for (let i = 0; i < quantidade; i++) {
                const confete = document.createElement('div');
                confete.classList.add('confete');
                confete.style.left = Math.random() * 100 + 'vw';
                confete.style.animationDuration = (Math.random() * 5 + 5) + 's';
                confete.style.backgroundColor = cores[Math.floor(Math.random() * cores.length)];
                document.body.appendChild(confete);
            }
        });
    </script>

    <nav class="cyber-nav">
        <span style="color: var(--neon-green); font-weight:bold; letter-spacing: 1px;">LINUX FOLIA_ üé≠</span>
        <div>
            <a onclick="navegar('home')">HOME</a>
            <a onclick="navegar('sobre')">SOBRE</a>
        </div>
    </nav>

    <div id="tela-home" class="tela fade-in container">
        <header style="text-align: center; margin-bottom: 30px;">
            <h1 style="color: #fff; margin:0">> SYSTEM LOGS</h1>
            <p style="color: var(--neon-blue);">üéâ Edi√ß√£o Especial de Carnaval üéâ</p>
        </header>

        <div class="busca-container">
            <span class="icone-busca">üîç</span>
            <input type="text" id="input-busca" onkeyup="filtrarPosts()" placeholder="Pesquisar comando, jogo ou dica...">
        </div>
        
        <div id="lista-posts">
            <div style="text-align: center; margin-top: 50px;">
                <p style="color: var(--neon-green)">CARREGANDO DADOS...</p>
                <progress></progress>
            </div>
        </div>

        <footer style="text-align: center; opacity: 0.5; font-size: 0.8em; margin-top: 50px;">
            DEV: DANILO ‚Ä¢ STATUS: FESTA üéä
        </footer>
    </div>

    <div id="tela-sobre" class="tela fade-in container">
        <h2 style="color: var(--neon-blue)">SOBRE O PROJETO</h2>
        <p>Bem-vindo ao <strong>Linux Lab</strong>. Este blog √© mantido por Danilo, provando que hardware antigo roda liso at√© no Carnaval.</p>
        
        <div class="caixa-sugestao">
            <h4 style="color: var(--neon-green)">üí° CENTRAL DE IDEIAS</h4>
            <p style="color: #ccc; font-size: 0.9em;">Tem uma dica? Envie aqui.<br><small>(Anti-Flood: 1 ideia a cada 72h)</small></p>
            
            <textarea id="texto-sugestao" rows="4" placeholder="Ex: Faz um post sobre jogos de ritmo..."></textarea>
            
            <button onclick="enviarSugestao()" class="contrast" id="btn-sugestao" style="width: 100%;">ENVIAR IDEIA üöÄ</button>
            
            <div id="relogio-bloqueio">
                ‚è≥ Aguarde <span id="tempo-restante">00h 00m 00s</span>
            </div>
            <p id="msg-sugestao" style="margin-top:15px; font-weight:bold; text-align: center;"></p>
        </div>

        <div style="margin-top: 40px; border-top: 1px dashed #333; padding-top: 30px; text-align: center;">
            <h4 style="color: var(--neon-green)">‚òï Pague um Caf√© pro Dev</h4>
            <p style="font-size: 0.9em; color: #888; margin-bottom: 15px;">
                O conte√∫do te ajudou? O blog √© gr√°tis, mas se quiser fortalecer para comprarmos o dom√≠nio .com.br, qualquer trocado ajuda!
            </p>
            
            <button class="outline" onclick="copiarPix()" id="btn-pix" style="width: 100%; border-color: var(--neon-blue); color: var(--neon-blue);">
                <span id="texto-pix">üí† Copiar Chave Pix</span>
            </button>
        </div>

        <div style="margin-top: 30px; text-align: center; border-top: 1px solid #333; padding-top: 20px;">
            <p style="color: #aaa; font-size: 0.9em; margin-bottom: 5px;">
                D√∫vidas, parcerias ou bugs? Mande um salve:
            </p>
            <a href="mailto:pixlinuxblog@gmail.com" style="color: var(--neon-blue); font-weight: bold; text-decoration: none; font-size: 1.1em;">
                ‚úâÔ∏è pixlinuxblog@gmail.com
            </a>
        </div>
    </div>

    <div id="tela-leitura" class="tela fade-in container">
        <nav><a onclick="navegar('home')" style="color: var(--neon-green); cursor:pointer; text-decoration: underline;">[ ‚Üê Voltar para o Bloco ]</a></nav>
        
        <article id="conteudo-artigo" class="artigo-container" style="border: 1px solid #333; padding: 25px; border-radius: 8px; background: #111; margin-top:20px;">
            </article>

        <div style="margin-top: 30px; text-align: center; border-top: 1px solid #333; padding-top: 30px;">
            <p style="margin-bottom: 15px;">Curtiu?</p>
            <button id="btn-curtir" class="btn-like" onclick="curtirAtual()">
                ü§ç Carregando...
            </button>
            <p style="font-size: 0.8em; color: #555; margin-top: 10px;">(Limite: 1 like por foli√£o)</p>
        </div>
        
        <footer style="margin-top: 50px; text-align: center;">
            <button class="outline" onclick="navegar('home')">VOLTAR AO IN√çCIO</button>
        </footer>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script>
        // --- CONFIGURA√á√ÉO ---
        const firebaseConfig = {
            apiKey: "AIzaSyDnkmZ7BMasKQQGnAQSTi3jxiuCbxyLU7M",
            authDomain: "meubloglinux.firebaseapp.com",
            projectId: "meubloglinux",
            storageBucket: "meubloglinux.firebasestorage.app",
            messagingSenderId: "262696388382",
            appId: "1:262696388382:web:d2784dc5dbba922cc8eb0f"
        };
        if (!firebase.apps.length) { firebase.initializeApp(firebaseConfig); }
        const db = firebase.firestore();

        let TODOS_POSTS = {}; 
        let ID_POST_ATUAL = null;
        let INTERVALO_RELOGIO = null;

        // --- CARREGAR POSTS ---
        db.collection("posts").orderBy("data", "desc").onSnapshot((snapshot) => {
            const listaDiv = document.getElementById('lista-posts');
            
            if(snapshot.empty) { 
                listaDiv.innerHTML = "<p style='text-align:center; padding: 50px;'>O bloco ainda n√£o saiu (sem posts).</p>"; 
                TODOS_POSTS = {};
                return; 
            }

            listaDiv.innerHTML = "";
            TODOS_POSTS = {}; 

            snapshot.forEach((doc) => {
                const post = doc.data();
                TODOS_POSTS[doc.id] = post;
                const likes = post.likes ? post.likes : 0;
                const views = post.views ? post.views : 0;

                listaDiv.innerHTML += `
                    <div class="card-post" onclick="abrirArtigo('${doc.id}')" style="cursor: pointer;">
                        <div style="display:flex; justify-content:space-between; margin-bottom: 10px;">
                            <small style="color:#aaa">${new Date(post.data).toLocaleDateString('pt-BR')}</small>
                            <div class="info-bar">
                                <span class="info-item" style="color: var(--neon-blue)">üé≠ ${likes}</span>
                                <span class="info-item" style="color: #fff">üëÅÔ∏è ${views}</span>
                            </div>
                        </div>
                        <h3 class="titulo-post" style="margin: 0; color: #fff;">${post.titulo}</h3>
                        <p style="color: #888; font-size: 0.9em; margin-top: 10px;">Toque para ler...</p>
                        <button style="margin-top:10px; font-size: 0.8em; padding: 5px 15px; border-color: var(--neon-blue); color: var(--neon-blue);">ACESSAR</button>
                    </div>
                `;
            });
            checarRota(true);
        });

        // --- BUSCA ---
        function filtrarPosts() {
            const termo = document.getElementById('input-busca').value.toLowerCase();
            const cards = document.getElementsByClassName('card-post');
            for (let i = 0; i < cards.length; i++) {
                const titulo = cards[i].getElementsByClassName('titulo-post')[0].innerText.toLowerCase();
                if (titulo.includes(termo)) cards[i].style.display = "block";
                else cards[i].style.display = "none";
            }
        }

        // --- NAVEGA√á√ÉO ---
        function navegar(destino) {
            document.querySelectorAll('.tela').forEach(t => t.style.display = 'none');
            
            if (destino === 'home') {
                document.getElementById('tela-home').style.display = 'block';
                location.hash = ''; 
                ID_POST_ATUAL = null;
                window.scrollTo(0,0);
            } else if (destino === 'sobre') {
                document.getElementById('tela-sobre').style.display = 'block';
                location.hash = 'sobre'; 
                window.scrollTo(0,0);
                iniciarRelogioBloqueio();
            }
        }

        function abrirArtigo(id) { location.hash = id; }
        
        function checarRota(isUpdate = false) {
            const hash = location.hash.replace('#', '');
            if (Object.keys(TODOS_POSTS).length === 0 && hash && hash !== 'sobre') return;

            if (hash === 'sobre') { navegar('sobre'); } 
            else if (hash && TODOS_POSTS[hash]) {
                const post = TODOS_POSTS[hash];
                const likes = post.likes ? post.likes : 0;
                
                if (ID_POST_ATUAL !== hash) {
                    ID_POST_ATUAL = hash;
                    // Incrementa View apenas se n√£o viu nessa sess√£o
                    if (!sessionStorage.getItem('view_registrada_' + hash)) {
                         const incremento = firebase.firestore.FieldValue.increment(1);
                         db.collection("posts").doc(hash).set({ views: incremento }, { merge: true });
                         sessionStorage.setItem('view_registrada_' + hash, 'true');
                    }
                    document.getElementById('conteudo-artigo').innerHTML = `
                        <h1 style="color: var(--neon-green); border-bottom: 1px solid #333; padding-bottom: 15px;">${post.titulo}</h1>
                        ${post.conteudo}
                    `;
                    document.querySelectorAll('.tela').forEach(t => t.style.display = 'none');
                    document.getElementById('tela-leitura').style.display = 'block';
                    window.scrollTo(0,0);
                } 
                configurarBotaoLike(likes);
            } else {
                if(location.hash !== '' && location.hash !== '#sobre') navegar('home');
                else if (location.hash === '') document.getElementById('tela-home').style.display = 'block';
            }
        }
        window.addEventListener('hashchange', () => checarRota(false));

        // --- LIKES ---
        function configurarBotaoLike(likes) {
            const btnLike = document.getElementById('btn-curtir');
            if (localStorage.getItem('like_' + ID_POST_ATUAL)) {
                btnLike.classList.add('curtido');
                btnLike.innerHTML = `üé≠ ${likes} (Voc√™ curtiu)`;
                btnLike.style.cursor = "default";
            } else {
                btnLike.classList.remove('curtido');
                btnLike.innerHTML = `üéä Curtir (${likes})`;
                btnLike.style.cursor = "pointer"; btnLike.disabled = false;
            }
        }
        function curtirAtual() {
            if (!ID_POST_ATUAL) return;
            if (localStorage.getItem('like_' + ID_POST_ATUAL)) { alert("Voc√™ j√° curtiu!"); return; }
            const btn = document.getElementById('btn-curtir');
            btn.innerHTML = "Sambando...";
            const incremento = firebase.firestore.FieldValue.increment(1);
            db.collection("posts").doc(ID_POST_ATUAL).set({ likes: incremento }, { merge: true })
            .then(() => { localStorage.setItem('like_' + ID_POST_ATUAL, 'true'); btn.classList.add('curtido'); })
            .catch((error) => { console.error(error); alert("Erro ao curtir."); });
        }

        // --- FUN√á√ÉO DO BOT√ÉO PIX ---
        function copiarPix() {
            const minhaChavePix = "pixlinuxblog@gmail.com"; 

            navigator.clipboard.writeText(minhaChavePix).then(() => {
                const btn = document.getElementById('btn-pix');
                const texto = document.getElementById('texto-pix');
                const original = texto.innerText;
                
                btn.style.backgroundColor = "var(--neon-green)";
                btn.style.color = "#000";
                texto.innerText = "‚úÖ Chave Copiada! Cole no App do Banco";
                
                setTimeout(() => {
                    btn.style.backgroundColor = "transparent";
                    btn.style.color = "var(--neon-blue)";
                    texto.innerText = original;
                }, 4000);
            }).catch(err => {
                alert("N√£o foi poss√≠vel copiar. A chave √©: " + minhaChavePix);
            });
        }

        // --- IDEIAS & REL√ìGIO ---
        function iniciarRelogioBloqueio() {
            const ultimaVez = localStorage.getItem('ultima_sugestao');
            const btn = document.getElementById('btn-sugestao');
            const caixaRelogio = document.getElementById('relogio-bloqueio');
            const textoRelogio = document.getElementById('tempo-restante');
            if (INTERVALO_RELOGIO) clearInterval(INTERVALO_RELOGIO);
            if (!ultimaVez) return;

            INTERVALO_RELOGIO = setInterval(() => {
                const agora = Date.now();
                const limite = 259200000; 
                const tempoPassado = agora - ultimaVez;
                if (tempoPassado < limite) {
                    const tempoRestante = limite - tempoPassado;
                    const horas = Math.floor((tempoRestante / (1000 * 60 * 60)));
                    const minutos = Math.floor((tempoRestante % (1000 * 60 * 60)) / (1000 * 60));
                    const segundos = Math.floor((tempoRestante % (1000 * 60)) / 1000);
                    btn.disabled = true; btn.innerText = "BLOQUEADO (FOLI√ÉO ACELERADO)"; btn.style.opacity = "0.5";
                    caixaRelogio.style.display = "block"; textoRelogio.innerText = `${horas}h ${minutos}m ${segundos}s`;
                } else {
                    btn.disabled = false; btn.innerText = "ENVIAR IDEIA üöÄ"; btn.style.opacity = "1";
                    caixaRelogio.style.display = "none"; clearInterval(INTERVALO_RELOGIO);
                }
            }, 1000);
        }
        function enviarSugestao() {
            const texto = document.getElementById('texto-sugestao').value;
            const msg = document.getElementById('msg-sugestao');
            const btn = document.getElementById('btn-sugestao');
            if (!texto) { alert("Escreva algo!"); return; }
            const ultimaVez = localStorage.getItem('ultima_sugestao');
            const agora = Date.now();
            if (ultimaVez && (agora - ultimaVez) < 259200000) { alert("Aguarde o tempo!"); return; }

            btn.setAttribute('aria-busy', 'true');
            db.collection("sugestoes").add({ texto: texto, data: agora, status: "nova" })
            .then(() => {
                localStorage.setItem('ultima_sugestao', agora);
                document.getElementById('texto-sugestao').value = "";
                msg.innerText = "‚úÖ Ideia enviada! Bom carnaval!"; msg.style.color = "var(--neon-green)";
                btn.setAttribute('aria-busy', 'false'); iniciarRelogioBloqueio();
            }).catch(err => { msg.innerText = "Erro."; btn.setAttribute('aria-busy', 'false'); });
        }
    </script>
</body>
</html>